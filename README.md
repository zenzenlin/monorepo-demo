# MonorepoDemo

```text
├─ .nx                       // Nx 快取相關資料夾
├─ apps                      // 應用程式子專案目錄
│  └─ app-demo               // app-demo 應用
│     └─ src                 // app-demo 應用主目錄，放應用原始碼
│        ├─ project.json     // 應用基礎資訊，定義 serve、build... 操作
│        ├─ tsconfig.json    // 應用專案基礎選項設定
│        └─ vite.config.ts   // vite 構建工具設定文件
├─ my-lib                    // my-lib 目錄
│  ├─ src                    // my-lib 主目錄
│  │  └─ generators          // 生成器資料夾
│  │     └─ vue              // vue 模板生成器資料夾
│  │        ├─ files         // 自定義生成器內容資料夾
│  │        ├─ generator.ts  // 運行生成器的程式碼
│  │        └─ schema.json   // 提供生成器的描述、可用選項、驗證資訊和預設值
│  ├─ generators.json        // 生成器相關資訊
│  ├─ project.json           // 子專案基礎資訊
│  └─ vite.config.ts         // vite 構建工具設定文件
├─ .editorconfig             // 編輯器風格配置文件
├─ .eslintignore             // Eslint 忽略配置文件
├─ .eslintrc.js              // Eslint 配置文件
├─ .gitignore                // Git 忽略配置文件
├─ .prettierignore           // prettier 忽略配置文件
├─ .prettier                 // prettier 配置文件
├─ nx.json                   // Nx 子專案配置文件
├─ package-lock.json         // 依賴包版本管理文件
├─ package.json              // 依賴包基礎資訊
├─ README.md                 // 項目說明書
└─ tsconfig.base.json        // Nx 專案基礎選項設定
```

<a alt="Nx logo" href="https://nx.dev" target="_blank" rel="noreferrer"><img src="https://raw.githubusercontent.com/nrwl/nx/master/images/nx-logo.png" width="45"></a>

✨ **This workspace has been generated by [Nx, a Smart, fast and extensible build system.](https://nx.dev)** ✨


## Start the app

To start the development server run `nx serve app-demo`. Open your browser and navigate to http://localhost:4200/. Happy coding!
##### Nx 會自動去 project.json 尋找 target 執行

## Generate code

If you happen to use Nx plugins, you can leverage code generators that might come with it.

Run `nx list` to get a list of available plugins and whether they have generators. Then run `nx list <plugin-name>` to see what generators are available.

Learn more about [Nx generators on the docs](https://nx.dev/plugin-features/use-code-generators).

## Running tasks

To execute tasks with Nx use the following syntax:

```
nx <target> <project> <...options>
```

You can also run multiple targets:

```
nx run-many -t <target1> <target2>
```

..or add `-p` to filter specific projects

```
nx run-many -t <target1> <target2> -p <proj1> <proj2>
```

Targets can be defined in the `package.json` or `projects.json`. Learn more [in the docs](https://nx.dev/core-features/run-tasks).

## 生成目錄、資料夾、檔案…

生成一個 app 專案底下的 vue component 名叫 ``one``
```
nx g @nx/vue:component --directory=src/app/ --name=one --nameAndDirectoryFormat=as-provided --unitTestRunner=vitest
(必須在專案目錄內才可建立元件)
The provided directory resolved relative to the current working directory "src/app/" does not exist under any project root. Please make sure to navigate to a location or provide a directory that exists under a project root.
```

生成一個 vue lib 名叫 ``my-lib``
```
nx g @nx/vue:lib my-lib
```

## 對 workspace 中的專案進行指令

對 app 執行 ``lint`` 操作
```
nx lint app
```

對所有專案執行 ``test`` 操作
```
nx run-many --target=test --all
```

對更改的程式碼進行分析，找出需要重新測試的最小項目集合，使用 ``affected`` 指令
```
nx affected --target=test
```

## 工作區可視化

能形象看到項目之間依賴關係圖
```
nx graph
```

## 自定義生成器

****@nx/plugin**** 是包含 generator 和 executors 的 npm 套件，用於擴充 Nx 工作區和自定義 Nx。
```
npm i @nx/plugin
```
1. 生成一個 NX 插件專案 Nx。
```
nx g @nx/plugin:plugin
```
2. 在 my-lib 專案下的 generator 資料夾建立 vue generator。新的生成器位於 ``/src/my-lib/generator/vue``。
```
nx g @nx/plugin:generator vue --project=my-lib
```
3. 實現自定義生成器：在插件項目中，可以在 ``libs/your-plugin-name/src/generators`` 目錄下添加自己的生成器。
4. 註冊生成器：在插件項目中的 ``src/generators/generators.json`` 文件中，註冊你的生成器。這告訴 NX 該插件有哪些生成器
5. 使用 NX CLI 運行你的生成器
```
nx g @monorepo-demo/my-lib:vue
```

## Ready to deploy?

Just run `nx build demoapp` to build the application. The build artifacts will be stored in the `dist/` directory, ready to be deployed.
